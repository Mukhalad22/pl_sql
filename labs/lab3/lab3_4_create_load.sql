/*
	Author: Raul zuniga
	Date: 2013-10-16
	Type: Oracle Database 11g
*/

DROP TABLE TREATMENT;
DROP TABLE PATIENT;
DROP TABLE PHYSICIAN;
DROP TABLE PROCEDURE;
DROP SEQUENCE PHYS_ID_SEQ;

CREATE TABLE PATIENT
(
	PAT_NBR INTEGER CONSTRAINT PATIENT_PAT_NBR_PK PRIMARY KEY,
	PAT_FNAME VARCHAR2(20),
	PAT_LNAME VARCHAR2(20),
	PAT_ADDRESS VARCHAR2(30),
	PAT_CITY VARCHAR2(20),
	PAT_STATE CHAR(2),
	PAT_ZIP NUMBER(5),
	PAT_ROOM NUMBER(3),
	PAT_BED INTEGER	
);
INSERT INTO PATIENT 
	VALUES(1379, 'John', 'Cribbs', '2110 Main St.', 'Austin', 'TX', 78711, 101, 1);
INSERT INTO PATIENT 
	VALUES(3249, 'Mary', 'Baker', '3547 W. 42nd St.', 'Berkeley', 'CA', 94117, 137, 2);
INSERT INTO PATIENT 
	VALUES(4500, 'Juan', 'Garcia', '1533 Telegraph', 'Berkeley', 'CA', 94117, 228, 2);
INSERT INTO PATIENT 
	VALUES(5116, 'Carol', 'Harris', '4710 Ave. E', 'Austin', 'TX', 78705, 438, 1);
INSERT INTO PATIENT 
	VALUES(5872, 'Elka', 'Zimmer', '7988 Cedar', 'Cleveland', 'OH', 44060, 137, 1);
INSERT INTO PATIENT 
	VALUES(6213, 'David', 'Rose', '322 Bridge Ave.', 'Redwood', 'CA', 94065, 100, 1);
INSERT INTO PATIENT 
	VALUES(7459, 'Chris', 'Smith', '788 Cummings', 'Cleveland', 'OH', 44066, 438, 3);
INSERT INTO PATIENT 
	VALUES(8031, 'Sylvia', 'Fitch', '3380 Fox Ave.', 'Madison', 'WI', 53711, 420, 4);
INSERT INTO PATIENT 
	VALUES(8659, 'Juan', 'Hernandez', '8300 Geneva Dr.', 'Austin', 'TX', 78723, 350, 2);
  
CREATE TABLE PHYSICIAN
(
	PHYS_ID	INTEGER CONSTRAINT PHYSICIAN_PHYS_ID_PK PRIMARY KEY,
	PHYS_FNAME VARCHAR2(20),
	PHYS_LNAME VARCHAR2(20),
	PHYS_PHONE VARCHAR2(12),
	PHYS_SPECIALTY VARCHAR2(30)
);
CREATE SEQUENCE phys_id_seq start with 101;
INSERT INTO PHYSICIAN
  VALUES(phys_id_seq.NEXTVAL, 'Chris', 'Wilcox', '512-329-1848', 'Eyes, Ears, Throat');
INSERT INTO PHYSICIAN
  VALUES(phys_id_seq.NEXTVAL, 'Jane', 'Nusca', '512-516-3947', 'Cardiovascular');
INSERT INTO PHYSICIAN
  VALUES(phys_id_seq.NEXTVAL, 'Juan', 'Gomez', '512-382-4987', 'Orthopedics');
INSERT INTO PHYSICIAN
  VALUES(phys_id_seq.NEXTVAL, 'Jan', 'Li', '512-516-3948', 'Cardiovascular');
INSERT INTO PHYSICIAN
  VALUES(phys_id_seq.NEXTVAL, 'Alex', 'Simmons', '512-442-5700', 'Hemotology');

CREATE TABLE PROCEDURE
(
	PRO_NBR	VARCHAR2(5) CONSTRAINT PROCEDURE_PRO_NBR PRIMARY KEY,
	PRO_DESC VARCHAR2(30),
	PRO_CHARGE NUMBER(8,2)
);
INSERT INTO PROCEDURE
  VALUES('13-08', 'Throat culture', 15.00);
INSERT INTO PROCEDURE
  VALUES('27-45', 'X-Ray', 62.00);
INSERT INTO PROCEDURE
  VALUES('52-14', 'Cardiogram',135.00);
INSERT INTO PROCEDURE
  VALUES('60-00', 'Blood Analysis', 58.00);
INSERT INTO PROCEDURE
  VALUES('88-20', 'MRI', 800.00);  


CREATE TABLE TREATMENT
(
	PAT_NBR INTEGER,
	PHYS_ID INTEGER,
	TRT_PROCEDURE VARCHAR2(5),
	TRT_DATE DATE,
	PRIMARY KEY(PAT_NBR, PHYS_ID, TRT_PROCEDURE, TRT_DATE),
	CONSTRAINT patient_pat_nbr_fk FOREIGN KEY(PAT_NBR)
      REFERENCES PATIENT(PAT_NBR),
	CONSTRAINT physician_phys_id_fk FOREIGN KEY(PHYS_ID)
      REFERENCES PHYSICIAN(PHYS_ID),  
	CONSTRAINT procedure_trt_procedure_fk FOREIGN KEY(TRT_PROCEDURE)
      REFERENCES PROCEDURE(PRO_NBR)
);
INSERT INTO TREATMENT
  VALUES(3249, 101, '13-08', '12-FEB-1999');
INSERT INTO TREATMENT
  VALUES(1379, 103, '27-45', '25-MAR-1999');
INSERT INTO TREATMENT
  VALUES(3249, 103, '88-20', '22-JAN-1999');
INSERT INTO TREATMENT
  VALUES(5116, 104, '52-14', '03-APR-1999');
INSERT INTO TREATMENT
  VALUES(4500, 101, '13-08', '04-FEB-1999');
INSERT INTO TREATMENT
  VALUES(8031, 102, '52-14', '15-MAR-2000');
INSERT INTO TREATMENT
  VALUES(5116, 104, '52-14', '05-FEB-2001');
INSERT INTO TREATMENT
  VALUES(5872, 105, '60-00', '13-FEB-2000');
INSERT INTO TREATMENT
  VALUES(3249, 103, '88-20', '24-JAN-2000');
INSERT INTO TREATMENT
  VALUES(8659, 104, '60-00', '08-APR-2001');  
  
COMMIT;